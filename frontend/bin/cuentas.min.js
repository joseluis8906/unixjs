cuentas=(function(){var b;function a(){Gwt.Gui.Window.call(this,"Cuentas");this.SetSize(512,256);this.SetPosition(Gwt.Gui.WIN_POS_CENTER);this.SetBorderSpacing(12);this.EnableMenu();this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.cabinet.in.svg","Guardar",this.Insert.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.refresh.svg","Actualizar",this.Update.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.delete.svg","Eliminar",this.Delete.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.power.svg","Salir",function(){window.cuentas.close();window.gcontrol.open()},Gwt.Gui.MENU_QUIT_APP);this.code=new Gwt.Gui.Entry("CÃ³digo");this.code.AddEvent(Gwt.Gui.Event.Keyboard.KeyUp,this.Select.bind(this));this.name=new Gwt.Gui.Entry("Nombre");this.layout=new Gwt.Gui.VBox();this.SetLayout(this.layout);this.layout.Add(this.code);this.layout.Add(this.name)}a.prototype=new Gwt.Gui.Window();a.prototype.constructor=a;a.prototype._App=function(){this.code._Entry();this.name._Entry();this.layout._VBox();this.code=null;this.name=null;this.layout=null};a.prototype.Select=function(c){if(c.keyCode===Gwt.Gui.Event.Keyboard.KeyCodes.Enter){var d='SELECT "Name" FROM "AccountingAccount" WHERE "Code"=\'{0}\''.replace("{0}",this.code.GetText());new Gwt.Core.SqlQuery(d,this.SelectResponse.bind(this))}};a.prototype.SelectResponse=function(c){if(c.Data.length>0){this.name.SetText(c.Data[0].Name)}else{this.Reset()}};a.prototype.Insert=function(c){var d=new GWT.Core.PrepareStatement('INSERT INTO "AccountingAccount" ("Code", "Name") VALUES (?, ?)');d.SetString(this.code.GetText());d.SetString(this.name.GetText());new Gwt.Core.SqlStatement([d],this.InsertResponse.bind(this))};a.prototype.InsertResponse=function(c){if(c.Result===1){this.Reset()}};a.prototype.Update=function(c){var d=new Gwt.Core.PrepareStatement('UPDATE "AccountingAccount" SET "Name"=? WHERE "Code"=?');d.SetString(this.name.GetText());d.SetString(this.code.GetText());new Gwt.Core.SqlStatement([d],this.UpdateResponse.bind(this))};a.prototype.UpdateResponse=function(c){if(c.Result===1){this.Reset()}};a.prototype.Delete=function(c){var d=new Gwt.Core.PrepareStatement('DELETE FROM "AccountingAccount" WHERE "Code"=?');d.SetString(this.code.GetText());new Gwt.Core.SqlStatement([d],this.DeleteResponse.bind(this))};a.prototype.DeleteResponse=function(c){if(c.Result===1){this.Reset()}};a.prototype.Reset=function(){this.code.SetText("");this.name.SetText("")};return new function(){this.open=function(){if(b===undefined){b=new a();b.Open();Gwt.Core.Contrib.SetActiveApp(window.cuentas)}else{console.log("%app yet opened".replace("%app",b.__proto__.constructor.name))}};this.close=function(){if(b!==undefined){b.Close();b=undefined;Gwt.Core.Contrib.RemoveActiveApp()}}}})();