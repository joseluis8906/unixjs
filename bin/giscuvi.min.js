giscuvi=(function(){var a;function b(){Gwt.Gui.Window.call(this,"Hoja De Vida De Envase");this.SetSize(640,420);this.SetPosition(Gwt.Gui.WIN_POS_CENTER);this.SetBorderSpacing(12);this.Rpc=new Gwt.Core.Rpc("/giscuvi/");this.EnableMenu();this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.cabinet.in.svg","Guardar",this.Insert.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.refresh.svg","Actualizar",this.Update.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.delete.svg","Eliminar",this.Delete.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.printer.svg","Imprimir",this.Print.bind(this));this.AddMenuItem(Gwt.Core.Contrib.Images+"appbar.power.svg","Salir",function(){window.gcontrol.open()},Gwt.Gui.MENU_QUIT_APP);this.layout=new Gwt.Gui.VBox();this.SetLayout(this.layout);this.slider=new Gwt.Gui.Slider(3);this.slider.SetSize(this.layout.GetWidth(),this.layout.GetHeight());this.slider.Setup();this.title1=new Gwt.Gui.StaticText("Datos Básicos");this.title1.SetWidth(this.slider.GetWidth());this.title1.TextAlign(Gwt.Gui.Contrib.TextAlign.Center);this.Numero=new Gwt.Gui.Entry("Número");this.NumeroInterno=new Gwt.Gui.Entry("Número Interno");this.Propietario=new Gwt.Gui.Entry("Propietario");this.Material=new Gwt.Gui.Entry("Lugar");this.Capacidad=new Gwt.Gui.Entry("Capacidad");this.ClaseProducto=new Gwt.Gui.Entry("Clase De Producto");this.NormaTecnica=new Gwt.Gui.Entry("Norma Técnica");this.title2=new Gwt.Gui.StaticText("Datos Básicos");this.title2.SetWidth(this.slider.GetWidth());this.title2.TextAlign(Gwt.Gui.Contrib.TextAlign.Center);this.Presion=new Gwt.Gui.Entry("Presión");this.AlturaConValvula=new Gwt.Gui.Entry("Altura Con Valvula");this.PesoConValvula=new Gwt.Gui.Entry("Peso Con Válvula");this.Valvula=new Gwt.Gui.Entry("Válvula");this.TipoValvula=new Gwt.Gui.Entry("Tipo De Válvula");this.AcabadoColor=new Gwt.Gui.Entry("Acabado Color");this.title3=new Gwt.Gui.StaticText("Generalidades Del Envase");this.title3.SetWidth(this.slider.GetWidth());this.title3.TextAlign(Gwt.Gui.Contrib.TextAlign.Center);this.Proveedor=new Gwt.Gui.Entry("Proveedor");this.FechaCompra=new Gwt.Gui.Date("Compra");this.FechaCompra.Now();this.FechaCompra.SetWidth(256);this.Garantia=new Gwt.Gui.Entry("Garantia");this.FechaFabricacion=new Gwt.Gui.Date("Fabricación");this.FechaFabricacion.Now();this.FechaFabricacion.SetWidth(256);this.PruebaHidrostatica=new Gwt.Gui.SelectBox("Prueba Hidrostática",[{Text:"Si",Value:true},{Text:"No",Value:false}]);this.Alquilado=new Gwt.Gui.SelectBox("Alquilado",[{Text:"Si",Value:true},{Text:"No",Value:false}]);this.FechaAlquiler=new Gwt.Gui.Date("Alquiler");this.FechaAlquiler.Now();this.FechaAlquiler.SetWidth(256);this.Observaciones=new Gwt.Gui.Text("Observaciones");this.layout.Add(this.slider);this.slider.AddSlotWidget(0,this.title1);this.slider.AddSlotWidget(0,this.Numero);this.slider.AddSlotWidget(0,this.NumeroInterno);this.slider.AddSlotWidget(0,this.Propietario);this.slider.AddSlotWidget(0,this.Material);this.slider.AddSlotWidget(0,this.Capacidad);this.slider.AddSlotWidget(0,this.ClaseProducto);this.slider.AddSlotWidget(0,this.NormaTecnica);this.slider.AddSlotWidget(1,this.title2);this.slider.AddSlotWidget(1,this.Presion);this.slider.AddSlotWidget(1,this.AlturaConValvula);this.slider.AddSlotWidget(1,this.PesoConValvula);this.slider.AddSlotWidget(1,this.Valvula);this.slider.AddSlotWidget(1,this.TipoValvula);this.slider.AddSlotWidget(1,this.AcabadoColor);this.slider.AddSlotWidget(2,this.title3);this.slider.AddSlotWidget(2,this.Proveedor);this.slider.AddSlotWidget(2,this.FechaCompra);this.slider.AddSlotWidget(2,this.Garantia);this.slider.AddSlotWidget(2,this.FechaFabricacion);this.slider.AddSlotWidget(2,this.PruebaHidrostatica);this.slider.AddSlotWidget(2,this.Alquilado);this.slider.AddSlotWidget(2,this.FechaAlquiler);this.slider.AddSlotWidget(2,this.Observaciones);this.Numero.AddEvent(Gwt.Gui.Event.Keyboard.KeyPress,this.CheckNumber.bind(this))}b.prototype=new Gwt.Gui.Window();b.prototype.constructor=b;b.prototype._App=function(){this.title1._StaticText();this.Numero._Entry();this.NumeroInterno._Entry();this.Propietario._Entry();this.Material._Entry();this.Capacidad._Entry();this.ClaseProducto._Entry();this.NormaTecnica._Entry();this.title2._StaticText();this.Presion._Entry();this.AlturaConValvula._Entry();this.Valvula._Entry();this.TipoValvula._Entry();this.AcabadoColor._Entry();this.title3._StaticText();this.Proveedor._Entry();this.FechaCompra._Date();this.Garantia._Entry();this.FechaFabricacion._Date();this.PruebaHidrostatica._SelectBox();this.Alquilado._SelectBox();this.FechaAlquiler._Date();this.Observaciones._Text();this.slider._Slider();this.layout._VBox();this.title1=null;this.Numero=null;this.NumeroInterno=null;this.Propietario=null;this.Material=null;this.Capacidad=null;this.ClaseProducto=null;this.NormaTecnica=null;this.title2=null;this.Presion=null;this.AlturaConValvula=null;this.Valvula=null;this.TipoValvula=null;this.AcabadoColor=null;this.title3=null;this.Proveedor=null;this.FechaCompra=null;this.Garantia=null;this.FechaFabricacion=null;this.PruebaHidrostatica=null;this.Alquilado=null;this.FechaAlquiler=null;this.Observaciones=null;this.slider=null;this.layout=null;this.Report=null};b.prototype.CreateData=function(){var c={Number:this.number.GetText(),Place:this.place.GetText(),Date:this.date.GetText()};return c};b.prototype.Insert=function(){var c=this.CreateData();c.Method="Insert";this.Rpc.Send(c,this.InsertResponse.bind(this))};b.prototype.InsertResponse=function(c){if(c.affected_rows===1){this.Print()}};b.prototype.Update=function(c){var d=this.CreateData();d.Method="Update";this.Rpc.Send(d,this.UpdateResponse.bind(this))};b.prototype.UpdateResponse=function(c){if(c.affected_rows===1){this.Print()}};b.prototype.Delete=function(){this.Rpc.Send({Method:"Delete",Number:this.number.GetText()},this.DeleteResponse.bind(this))};b.prototype.DeleteResponse=function(c){if(c.affected_rows===1){this.Reset()}};b.prototype.Print=function(c){this.Report=Gwt.Core.Contrib.LoadDocument("/documents/giscuvi.html");this.Report.addEventListener("load",this.ReportLoad.bind(this))};b.prototype.Reset=function(){this.number.SetText("");this.place.SetText("");this.date.Now()};b.prototype.CheckNumber=function(c){if(c.keyCode===Gwt.Gui.Event.Keyboard.KeyCodes.Enter){if(this.number.GetText()===""){this.Rpc.Send({Method:"NextNumber"},this.NextNumber.bind(this))}else{this.Rpc.Send({Method:"AutoFill",Number:this.number.GetText()},this.AutoFill.bind(this))}}};b.prototype.AutoFill=function(c){if(c.length>0){this.number.SetText(c[0].Number);this.place.SetText(c[0].Place);this.date.SetDate(c[0].Date)}else{this.Reset()}};b.prototype.NextNumber=function(c){if(c.length>0){this.number.SetText(Number(c[0].Number)+1)}else{this.number.SetText(Number(1))}};b.prototype.ReportLoad=function(){var c=this.Report.document;c.getElementById("Number").textContent=Gwt.Core.Contrib.ZFill(this.number.GetText(),4);c.getElementById("Place").textContent=this.place.GetText()+", "+this.date.GetText();c.getElementById("Holder").textContent=this.holder.GetText();c=undefined;this.Report=null;this.Reset()};return new function(){this.open=function(){if(a===undefined){a=new b();a.Open()}else{console.log("%app yet opened".replace("%app",a.__proto__.constructor.name))}};this.close=function(){if(a!==undefined){a.Close();a=undefined}}}})();